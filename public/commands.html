<!DOCTYPE html>
<html lang="ру">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Инструменты сервера</title>
    <link rel="stylesheet" href="/styles/style.css">
</head>
<body>
    <header class="header">
        <a href="/" class="btn btn-secondary">← Вернуться к конфигуратору</a>
    </header>

    <div class="page-container">
        <div class="tool-section">
            <h2>Загрузка файлов на сервер</h2>
            <form id="upload-form">
                <p>Выберите один или несколько файлов для загрузки в папку <code>uploads/</code>.</p>
                <div style="display: flex; gap: 0.75rem; flex-wrap: wrap; margin-bottom: 1rem;">
                    <label for="upload-file-input" class="btn btn-secondary">Выбрать файлы</label>
                    <button type="submit" class="btn btn-primary">Загрузить файлы</button>
                </div>
                <input type="file" id="upload-file-input" multiple required>
            </form>
            <div class="result-box" id="upload-result"></div>
        </div>

        <div class="tool-section">
            <h2>Сборка (долгая задача)</h2>
            <form id="build-form">
                <p>Выберите модули для сборки. Будет выполнено последовательно:</p>
                <div class="checkbox-group" style="margin: 1rem 0; display: grid; gap: 0.5rem;">
                    <label><input type="checkbox" name="build_part" value="kernel"> kernel</label>
                    <label><input type="checkbox" name="build_part" value="fs"> fs</label>
                    <label><input type="checkbox" name="build_part" value="net"> net</label>
                </div>
                <button type="submit" class="btn btn-primary">Запустить сборку</button>
            </form>
            <div class="result-box" id="build-result" style="display:none; margin-top: 1rem;">
                <h3>Вывод сборки: <span id="build-status"></span></h3>
                <pre id="build-output"></pre>
            </div>
        </div>

        <div class="tool-section">
            <h2>Запуск скрипта с параметром (1-4)</h2>
            <form id="number-task-form">
                <p>Выберите значение (1-4), задача выполнится в долгую:</p>
                <div style="margin: 1rem 0; display: grid; gap: 0.5rem;">
                    <label><input type="radio" name="number-choice" value="1" checked> 1</label>
                    <label><input type="radio" name="number-choice" value="2"> 2</label>
                    <label><input type="radio" name="number-choice" value="3"> 3</label>
                    <label><input type="radio" name="number-choice" value="4"> 4</label>
                </div>
                <button type="submit" class="btn btn-warning">Запустить задачу</button>
            </form>
            <div class="result-box" id="number-task-result" style="display:none; margin-top: 1rem;">
                <h3>Вывод: <span id="number-task-status"></span></h3>
                <pre id="number-task-output"></pre>
            </div>
        </div>
    </div>

    <footer class="footer-panel">
        <div class="tool-section">
            <h2>Долгая задача: подготовка архива</h2>
            <p>Нажмите, чтобы запустить процесс. После завершения станет доступна ссылка на скачивание.</p>
            <div class="task-controls">
                <button id="start-processing-btn" class="btn btn-primary">Запустить подготовку</button>
                <a href="/api/download_archive.php" id="download-archive-btn" class="btn btn-success" style="display:  none;">Скачать готовый архив</a>
            </div>
            <div class="result-box" id="processing-result" style="display:none; margin-top: 1rem;">
                <h3>Статус: <span id="processing-status"></span></h3>
                <pre id="processing-output"></pre>
            </div>
        </div>
    </footer>

    <script src="/scripts/commands.js" defer></script>
</body>
</html>