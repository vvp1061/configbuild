<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Инструменты сервера</title>
    <link rel="stylesheet" href="/styles/style.css">
</head>
<body>

    <header class="header">
        <a href="/" class="btn btn-secondary">← Вернуться к конфигуратору</a>
    </header>

    <div class="page-container">
        
        <div class="tool-section">
            <h2>Загрузка файлов на сервер</h2>
            <form id="upload-form">
                <p>Выберите один или несколько файлов для загрузки в папку <code>uploads/</code>.</p>
                <input type="file" id="file-input" multiple required style="margin-bottom: 1rem;">
                <button type="submit" class="btn btn-primary">Загрузить файлы</button>
            </form>
            <div class="result-box" id="upload-result"></div>
        </div>

        <div class="tool-section">
            <h2>Выполнение простых команд</h2>
            <form id="command-form">
                <p>Выберите команды, которые будут выполнены на сервере.</p>
                <div class="checkbox-group" style="margin: 1rem 0;">
                    <label><input type="checkbox" name="command" value="date"> Показать текущую дату и время</label>
                    <label><input type="checkbox" name="command" value="pwd"> Показать текущую рабочую директорию</label>
                    <label><input type="checkbox" name="command" value="ls"> Показать содержимое директории</label>
                </div>
                <button type="submit" class="btn btn-success">Выполнить</button>
            </form>
            <div class="result-box" id="command-result"></div>
        </div>

        <div class="tool-section">
            <h2>Выполнение скрипта my_script.sh</h2>
            <form id="script-form">
                <p>Выберите опцию, которая будет передана в скрипт.</p>
                <div style="margin: 1rem 0;">
                    <label for="script-input">Ваш выбор (число от 1 до 4):</label>
                    <input type="number" id="script-input" min="1" max="4" value="1" required>
                </div>
                <button type="submit" class="btn btn-warning">Запустить скрипт</button>
            </form>
            <div class="result-box" id="script-result"></div>
        </div>

    </div>

    <!-- НИЖНЯЯ ПАНЕЛЬ ДЛЯ ДОЛГОЙ ЗАДАЧИ -->
    <footer class="footer-panel">
        <div class="tool-section">
            <h2>Запуск долгой задачи (Сборка)</h2>
            <p>Нажмите, чтобы запустить процесс сборки. Вывод будет отображаться ниже в реальном времени.</p>
            
            <!-- Кнопки управления задачей -->
            <div class="task-controls">
                <button id="start-task-btn" class="btn btn-primary">Запустить сборку</button>
                <a href="/api/download_archive.php" id="download-archive-btn" class="btn btn-success" style="display: none;">
                    Скачать готовый архив
                </a>
            </div>
            
            <!-- Окно вывода лога -->
            <div class="result-box" id="task-result" style="display:none; margin-top: 1rem;">
                <h3>Вывод сборки: <span id="task-status"></span></h3>
                <pre id="task-output"></pre>
            </div>
        </div>
    </footer>

    <script src="/scripts/commands.js" defer></script>
</body>
</html>