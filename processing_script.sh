#!/bin/bash

# --- ИЗМЕНЕНИЕ: Путь к папке с результатами теперь передается как аргумент ---
if [ -z "$1" ]; then
  echo "Критическая ошибка: Не указана директория для сохранения результатов."
  exit 1
fi

OUTPUT_DIR="$1"

# Создаем папку, если ее нет, и очищаем ее
mkdir -p "$OUTPUT_DIR"
# Проверяем, что папка была создана успешно
if [ ! -d "$OUTPUT_DIR" ]; then
    echo "Критическая ошибка: не удалось создать директорию $OUTPUT_DIR"
    exit 1
fi
rm -f "$OUTPUT_DIR"/*

echo "Запуск обработки..."
echo "Файлы будут сохранены в: $OUTPUT_DIR"

# Создаем несколько файлов с результатами, используя переданный путь
echo "Результат обработки данных A от $(date)" > "$OUTPUT_DIR/result_A.txt"
echo "Лог выполнения для B от $(date)" > "$OUTPUT_DIR/log_B.log"
sleep 1 # Имитируем долгую работу
echo "Все готово." > "$OUTPUT_DIR/status.txt"

echo "Обработка завершена. Файлы созданы."

exit 0